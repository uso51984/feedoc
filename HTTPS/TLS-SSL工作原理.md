# TLS/SSL工作原理
`HTTPS`协议的主要功能基本都依赖于`TLS/SSL`协议
`TLS/SSL`的功能实现主要依赖于三类基本算法：`散列函数 Hash`、`对称加密`和`非对称加密`，其利用`非对称加密`实现**身份认证**和**密钥协商**，`对称加密算法采用协商的密钥`对**数据加密**，基于`散列函数`**验证信息的完整性**。  

![ddd.jpeg](../img/img49.png)

1. **散列函数Hash**
常见的有 `MD5`、`SHA1`、`SHA256`，该类函数特点是函数单向不可逆、对输入非常敏感、输出长度固定，针对数据的任何修改都会改变散列函数的结果，用于防止信息篡改并验证数据的完整性;
在信息传输过程中，散列函数不能单独实现信息防篡改，因为明文传输，中间人可以修改信息之后重新计算信息摘要，因此需要对传输的信息以及信息摘要进行加密;

2. **对称加密**
常见的有 `AES-CBC`、`DES`、`3DES`、`AES-GCM`等，相同的密钥可以用于信息的加密和解密，掌握密钥才能获取信息，能够防止信息窃听，通信方式是1对1;
对称加密的优势是`信息传输1对1`，需要共享相同的密码，密码的安全是保证信息安全的基础，服务器和 N 个客户端通信，需要维持 N 个密码记录，且缺少修改密码的机制;

3. **非对称加密**
即常见的 `RSA` 算法，还包括 `ECC`、`DH` 等算法，算法特点是，密钥成对出现，一般称为公钥(公开)和私钥(保密)，公钥加密的信息只能私钥解开，私钥加密的信息只能公钥解开。因此掌握公钥的不同客户端之间不能互相解密信息，只能和掌握私钥的服务器进行加密通信，服务器可以实现1对多的通信，客户端也可以用来验证掌握私钥的服务器身份。

非对称加密的特点是`信息传输1对多`，服务器只需要维持一个私钥就能够和多个客户端进行加密通信，但服务器发出的信息能够被所有的客户端解密，且该算法的**计算复杂，加密速度慢**。

结合三类算法的特点，TLS的基本工作方式是，客户端使用`非对称加密与服务器进行通信`，`实现身份验证并协商对称加密使用的密钥`，然后`对称加密算法采用协商密钥对信息以及信息摘要进行加密通信`，不同的节点之间采用的对称密钥不同，从而可以保证信息只能通信双方获取。
