<div class="title">正则表达式</div>

## 1. 作用
1. 验证字符串是否符合指定特征，比如验证是否是合法的邮件地址。
2. 用来查找字符串，从一个长的文本中查找符合指定特征的字符串，比查找固定字符串更加灵活方便。
3. 用来替换，比普通的替换更强大。

## 2. 规则
### 2.1. 普通字符
字母、数字、汉字、下划线、以及后边章节中没有特殊定义的标点符号，都是"普通字符"。表达式中的普通字符，在匹配一个字符串的时候，匹配与之相同的一个字符。

点击测试 举例1：表达式 "c"，在匹配字符串 "abcde" 时，匹配结果是：成功；匹配到的内容是："c"；匹配到的位置是：开始于2，结束于3。

### 2.2. 简单的转义字符和元字符
| 表达式   | 可匹配           |
|----------|------------------|
| `\r, \n` | 代表回车和换行符 |
| `\t`     | 制表符           |
| `\\`     | 代表 "\" 本身    |
有特殊用处的标点符号，在前面加 "\" 后，就代表该符号本身。

### 2.3. 元字符
模式中使用的所有元字符都必须转义。正则表达式中的元字符包括

```js
( [ { \ ^ $ | ) ? * + .] }
```
>由于 RegExp 构造函数的模式参数是字符串，所以在某些情况下要对字符进行双重转义。所有元字符都必须双重转义，那些已经转义过的字符也是如此。

```js
// 对 \. 再次转义
var exp = new RegExp('\\.docx', 'gi');

//匹配 \n
var exp1 = /\\n/g; //对\n中的\转义
var exp2 = new RegExp('\\\\n', 'g'); // 对 \\n 再次转义
```

###  2.4. ()  []  {} 的区别

* `() `:  的作用是提取匹配的字符串。表达式中有几个()就会得到几个相应的匹配字符串。比如 (`\s+`) 表示连续空格的字符串。
* `[]` 是定义匹配的字符范围。比如 `[a-zA-Z0-9]` 表示字符文本要匹配英文字符和数字。
* ` {} `一般用来表示匹配的长度，比如 `\d{3}` 表示匹配三个数字，`\d{1,3}`表示匹配1~3个数字，`\d{3,}` 表示匹配3个以上数字。

###  2.5. ^ 、$、\b
* `^` 匹配一个字符串的开头，比如 (^a) 就是匹配以字母a开头的字符串
* `$` 匹配一个字符串的结尾,比如 (b$) 就是匹配以字母b结尾的字符串
* `^` 还有另个一个作用就是取反，比如`[^xyz]` 表示匹配的字符串不包含`xyz`
* `\b` 匹配一个单词边界，也就是单词和空格之间的位置，不匹配任何字符


注意问题：
> 如果 ^ 出现在[ ] 中一般表示取反，而出现在其他地方则是匹配字符串的开头。
^ 和 $ 配合可以有效匹配完整字符串:
```js
/d+/.test('4xpt');  // true - 部分匹配成功
/^\d+$/.test('4xpt');  // false - 完整匹配失败
```

### 2.6. 修饰匹配次数的特殊符号
| 表达式  | 可匹配                                                                               |
|---------|--------------------------------------------------------------------------------------|
| `{n}`   | 表达式重复n次，比如：点击测试 "\w{2}" 相当于 "\w\w"；点击测试 "a{5}" 相当于 "aaaaa"  |
| `{m,n}` | 表达式至少重复m次，最多重复n次，比如：点击测试 "ba{1,3}"可以匹配 "ba"或"baa"或"baaa" |
| `{m,}`  | 表达式至少重复m次，比如：点击测试 "\w\d{2,}"可以匹配 "a12","_456","M12344"...        |
| `?`     | 表达式至少出现1次，相当于 {1,}，比如：点击测试 "a+b"可以匹配 "ab","aab","aaab"...    |
| `+`     | 表达式至少重复m次，比如：点击测试 "\w\d{2,}"可以匹配 "a12","_456","M12344"...        |
| `*`     | 表达式不出现或出现任意次，相当于 {0,}，比如：点击测试 "\^*b"可以匹配 "b","^^^b"...   |

1. 表达式 `\d+\.?\d*` 在匹配 "It costs $12.5" 时，匹配的结果是：成功；匹配到的内容是："12.5"；匹配到的位置是：开始于10，结束于14。
2. 表达式 `go{2,8}gle` 在匹配 "Ads by goooooogle" 时，匹配的结果是：成功；匹配到的内容是："goooooogle"；匹配到的位置是：开始于7，结束于17。

###  2.7. 一些符号可以影响表达式内部的子表达式之间的关系
1. `|`: 左右两边表达式之间 "或" 关系，匹配左边或者右边
1. `()`:
  1. 在被修饰匹配次数的时候，括号中的表达式可以作为整体被修饰
  2. 取匹配结果的时候，括号中的表达式匹配到的内容可以被单独得到


### 2.8. $1 与 \1
`$1-$9`: 存放着正则表达式中最近的9个正则表达式的提取的结果，这些结果按照子匹配的出现顺序依次排列。
**基本语法是：** `RegExp.$n` ，这些属性是静态的，除了replace中的第二个参数可以省略 RegExp 之外，其他地方使用都要加上 RegExp 。
```js
//使用RegExp访问
/(\d+)-(\d+)-(\d+)/.test('2016-03-26')

RegExp.$1  // 2016
RegExp.$2  // 03
RegExp.$3  // 26

//在replace中使用
'2016-03-26'.replace(/(\d+)-(\d+)-(\d+)/, '$1年$2月$3日')
// 2016年03月26日
```
`\1`: 表示后向引用，是指在正则表达式中，从左往右数，第1个()中的内容，以此类推，\2表示第2个()，\0表示整个表达式。
```js
//匹配日期格式，表达式中的\1代表重复(\-|\/|.)
var rgx = /\d{4}(\-|\/|.)\d{1,2}\1\d{1,2}/

rgx.test('2016-03-26') // true

rgx.test('2016-03.26') // false
```
>  两者的区别是：\n 只能用在表达式中，而 $n 只能用在表达式之外的地方。

### 2.9. 常用简写字符

| 代码 | 说明                         |
|------|------------------------------|
| `.`    | 匹配除换行符以外的任意字符   |
| `\w`   | 匹配字母或数字或下划线或汉字 |
| `\s`   | 匹配任意的空白符             |
| `\d`   | 匹配数字                     |
| `\b`   | 匹配单词的开始或结束         |
| `^`    | 匹配字符串的开始             |
| `$`    | 匹配字符串的结束             |

## 3. js中的正则方法
### 3.1. test
前面的大都是JS正则表达式的语法，而test则是用来检测字符串是否匹配某一个正则表达式，如果匹配就会返回true,反之则返回false
```js
/\d+/.test('123') ; // true
/\d+/.test('abc') ; // false
```
### 3.2. match
match是获取正则匹配到的结果，以数组的形式返回
```js
'186a619b28'.match(/\d+/g); // ['186', '619', '28']
```
### 3.3. replace
replace 本身是JavaScript字符串对象的一个方法，它允许接收两个参数：
```js
replace([RegExp|String], [String|Function])
```
* 参数1：可以是一个普通的字符串或是一个正则表达式
* 参数2：可以是一个普通的字符串或是一个回调函数
如果第1个参数是 RegExp，JS会先提取RegExp匹配出的结果，然后用第2个参数逐一替换匹配出的结果

如果第2个参数是回调函数，每匹配到一个结果就回调一次，每次回调都会传递以下参数：
* `result`: 本次匹配到的结果
* `$1,...$9`: 正则表达式中有几个()，就会传递几个参数，$1~$9分别代表本次匹配中每个()提取的结果，最多9个
* `offset`: 记录本次匹配的开始位置
* `source`: 接受匹配的原始字符串



















