<div class="title"> 前端架构</div>

## 1. 架构的总体设计

### 1.1. 总体大概步骤

1. 收集利益相关者的需求。倾听业务人员、项目负责人等相关者的需求，进行用户访谈，收集相关的需求。
2. 与相应的技术人员（如开发人员、测试人员）讨论，了解架构上的潜在限制。
3. 寻找潜在的可行性技术方案。
4. 整理出功能列表中的功能性需求和跨功能性需求。
5. 找出会严重影响开发的风险点。
6. 对架构设计进行概念证明。
7. 细化架构的部分实施细节。
8. 结合技术和业务，进行需求排期。

### 1.2. 相关者的利益

* 产品或业务负责人（PO），关心是否能按时
* 项目经理，根据架构来决定项目计划及项目人选。
* 架构师、开发人员，关心系统的构建、演进及维护。
* 业务分析人员，关心如何分配和安排项目的迭代计划。
* 测试人员，设计合理的测试计划，如对系统集成部分的测试等。

### 1.3. 架构关注点

![](./img/img13.png )

### 1.4. 明确跨功能需求(非功能性需求)

1. 运行质量（Execution Qualities）：即可以在系统运作时观察到的质量，例如安全性、易用性等。
2. 演进质量（Evolution Qualities）：它们体现在系统的静态结构中，例如软件可测试性、可维护性、可扩展性、可伸缩性（Scalability）等。
3. 可用性：是指在一段时间内，系统能够正常运行的概率。如何保证这样的可用性？
4. 可维护性：其表现的指标是，在接到修改后，可以在相应的时间内（如小功能1～3天）修改完成。
5. 可变性：在未来，应用的哪些地方会发生变化？是否需要提前做好准备？
6. 容错性：系统中可能会出现哪些故障？如何确保这些故障不会让系统无法运行？
7. 浏览器的支持范围：明确指出我们要针对哪些浏览器，以及浏览器的哪些版本做兼容。
8. 移动端设备支持的版本：常见的设备如An-droid和iOS，设备最低的支持版本，以及支持哪些设备制造商。

### 1.5. 罗列技术风险点
1. 技术风险：如果在应用中某一个功能的实现比较复杂，或者团队缺乏某一领域的经验，如AI，那么在实践的时候可能会影响系统的架构。
2. 第三方系统集成
3. 受限制的线上运行环境：在开发人员和运维人员部门分离的组织里，往往会在内部限制某些语言，如选定Java等语言，限制其他语言的使用。
4. 与此同时，若是一些需求带来额外的技术膨胀，则会为按时完成应用的开发带来风险。

## 2. 前端架构
### 2.1. 前端架构的发展历
后端渲染html-> js做简单动效 -> ajax异步通信 -> 动态html异步取回 -> 模板分离(API返回接口MVC，MVVM框架Backbone，Knockout) -> 大前端(组件化)(Ionic、React Native、Flutter) -> 微前端
> 微前端： 1. 跨框架。在一个页面上运行，可以同时使用多个前端框架。2. 应用拆分。将一个复杂的应用拆解为多个微小的应用，类似于微服务。3. 遗留系统迁移。让旧的前端框架，可以直接嵌入现有的应用运行。

### 2.2. 前端架构设计：层次设计
![image](./img/img34.png)
1. 系统级：即应用在整个系统内的关系，如与后台服务如何通信，与第三方系统如何集成。
2. 应用级：即应用外部的整体架构，如多个应用之间如何共享组件、如何通信等。
3. 模块级：即应用内部的模块架构，如代码的模块化、数据和状态的管理等。
4. 代码级：即从基础设施来保障架构实施。

#### 2.2.1. 系统内架构
前端应用来说，这一部分的子系统包含了如下内容：
1. 其他前端应用。关注如何与这些应用进行交互、通信等。
2. 对接的后台服务。关注如何与后台服务进行通信，诸如权限、授权、API管理等。
3. 考虑前端的客户端展现形式。它可能是PC Web应用、移动Web应用、混合移动应用（结合Cordova构架）、混合桌面应用（结合Electron框架）、原生移动应用（结合React Native）等，具体选择哪一种技术，取决于我们先前调查的利益相关者的需求。
> 微前端是将多个前端应用以某种形式结合到一起，当系统中存在多个前端应用（或者单个前端应用的模块较大）时，就需要考虑使用微前端的方式来拆分。此外，还需要做一系列的技术决策来支持应用的整合。

#### 2.2.2. 应用级架构
由于各应用之间需要通过复用代码、共享组件库、统一设计等减少工作量，因此，我们要考虑以下几方面内容。
1. 脚手架。作为一个基础的模块应用，脚手架用于快速生成、搭建前端应用。
2. 模式库。它是一系列可复用代码的合集，如前端组件、通用的工具函数等。
3. 设计系统。它相当于更高级别的UI组件库，在这个层级里，我们关注抽象通用的UI模式，用于在多个系统之间共享设计。与模式库/组件库不同，设计系统偏向于设计人员的模式，而非开发人员的视角。

#### 2.2.3. 模块级架构
模块级架构是深入单个应用内部、更细致地设计应用内部的架构
1. 模块化。它包含了CSS、JavaScript、HTML/模板的模块化。
2. 组件化。它主要考虑的是，在应用内如何对组件进行封闭，以及相应的原则和粒度

#### 2.2.4. 代码级：规范与原则
1. 开发流程。它包含了开发一个功能所需要的完整流程——从源码管理方式、代码合并方式、代码提交信息规范、代码规范自动化，到测试编写等一系列的过程。
2. 代码质量及改善。单页测试
3. 规范而非默契。代码风格的统一， ；代码的命名
4. 注重代码的可维护性——简单的代码更容易被读懂和维护。